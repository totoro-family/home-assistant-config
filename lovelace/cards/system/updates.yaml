type: custom:auto-entities
title: System Updates
card: { type: entities }
show_empty: false
filter:
  include:
    - domain: update
      options: { secondary_info: last-changed }
  exclude:
    - state: "unavailable"
    - state: "unknown"
      domain: update # otherwise it hides the esphome button
    - state: "off"
    - state: "0"
  template: >
    {% if is_state('binary_sensor.esphome_device_updates_available', 'on') %}
    button.update_all_esphome_devices
    {% endif %}
