type: custom:xiaomi-vacuum-map-card
map_source:
  camera: camera.chungus_map
  crop:
    top: 180
    bottom: 200
calibration_source:
  camera: true
entity: vacuum.chungus
vacuum_platform: send_command
title: Chungus
map_locked: true
map_modes:
  - !include map-modes/zone-cleanup.yaml
  - !include map-modes/pin-and-go.yaml
  - !include map-modes/rooms-downstairs.yaml
tiles:
  - entity: vacuum.chungus
    label: Status
    icon: mdi:robot-vacuum
    translations:
      docked: Docked
      idle: Idle
      cleaning: Cleaning
      returning: Returning
      paused: Paused
      error: Error
  - tile_id: battery_level
    entity: vacuum.chungus
    label: Battery
    attribute: battery_level
    icon: mdi:battery-charging-100
    unit: "%"
  - tile_id: fan_speed
    entity: select.chungus_fan_speed
    label: Fan speed
    icon: mdi:fan
    translations:
      "off": "Off"
      silent: Silent
      balanced: Balanced
      turbo: Turbo
      max: Max
      max_plus: Max+
      custom: Custom
  - entity: select.chungus_mop_intensity
    label: Mop intensity
    icon: mdi:water-opacity
    translations:
      "off": "Off"
      mild: Mild
      moderate: Moderate
      intense: Intense
      custom: Custom
    conditions:
      - entity: binary_sensor.chungus_mop_attached
        value: "on"
  - entity: vacuum.chungus
    label: Mop route
    attribute: mop_mode
    icon: mdi:water-sync
    translations:
      standard: Standard
      deep: Deep
      deep_plus: Deep+
      custom: Custom
    conditions:
      - entity: binary_sensor.chungus_mop_attached
        value: "on"
      - entity: vacuum.chungus
        attribute: mop_intensity
        value_not: "off"
  - entity: sensor.chungus_current_error
    label: Current error
    icon: mdi:alert
    conditions:
      - entity: sensor.chungus_current_error
        value_not: None
  - entity: binary_sensor.chungus_mop_attached
    label: Mop attached
    icon: mdi:receipt-text-outline
    translations:
      "on": "Yes"
      "off": "No"
  - entity: sensor.chungus_filter_left
    label: Filter left
    icon: mdi:air-filter
    unit: " h"
    multiplier: 0.00027777777 # 1/3600
    precision: 0
  - entity: sensor.chungus_sensor_dirty_left
    label: Sensor dirty left
    icon: mdi:eye-outline
    unit: " h"
    multiplier: 0.00027777777 # 1/3600
    precision: 0
  - entity: sensor.chungus_main_brush_left
    label: Main brush left
    icon: mdi:brush
    unit: " h"
    multiplier: 0.00027777777 # 1/3600
    precision: 0
  - entity: sensor.chungus_side_brush_left
    label: Side brush left
    icon: mdi:brush
    unit: " h"
    multiplier: 0.00027777777 # 1/3600
    precision: 0
  - entity: sensor.chungus_total_clean_count
    label: Total clean count
    icon: mdi:counter
icons:
  - icon: mdi:play
    conditions:
      - entity: vacuum.chungus
        value_not: cleaning
      - entity: vacuum.chungus
        value_not: error
      - entity: vacuum.chungus
        value_not: returning
    tooltip: Start
    tap_action:
      action: call-service
      service: vacuum.start
      service_data:
        entity_id: vacuum.chungus
  - icon: mdi:pause
    conditions:
      - entity: vacuum.chungus
        value_not: docked
      - entity: vacuum.chungus
        value_not: idle
      - entity: vacuum.chungus
        value_not: error
      - entity: vacuum.chungus
        value_not: paused
    tooltip: Pause
    tap_action:
      action: call-service
      service: vacuum.pause
      service_data:
        entity_id: vacuum.chungus
  - icon: mdi:stop
    conditions:
      - entity: vacuum.chungus
        value_not: docked
      - entity: vacuum.chungus
        value_not: idle
      - entity: vacuum.chungus
        value_not: error
      - entity: vacuum.chungus
        value_not: paused
    tooltip: Stop
    tap_action:
      action: call-service
      service: vacuum.stop
      service_data:
        entity_id: vacuum.chungus
  - icon: mdi:home-map-marker
    conditions:
      - entity: vacuum.chungus
        value_not: docked
      - entity: vacuum.chungus
        value_not: returning
    tooltip: Return to base
    tap_action:
      action: call-service
      service: vacuum.return_to_base
      service_data:
        entity_id: vacuum.chungus
  - icon: mdi:target-variant
    conditions:
      - entity: vacuum.chungus
        value_not: docked
      - entity: vacuum.chungus
        value_not: error
      - entity: vacuum.chungus
        value_not: cleaning
      - entity: vacuum.chungus
        value_not: returning
    tooltip: Clean spot
    tap_action:
      action: call-service
      service: vacuum.clean_spot
      service_data:
        entity_id: vacuum.chungus
  - icon: mdi:bullhorn
    tooltip: Locate
    tap_action:
      action: call-service
      service: vacuum.locate
      service_data:
        entity_id: vacuum.chungus
